function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var e,t=document.querySelector(".button"),n=document.querySelector(".game-field"),o=document.querySelector(".game-score"),a=document.querySelector(".message-lose"),i=document.querySelector(".message-win"),c=document.querySelector(".message-start"),u=0;function f(r){for(var e=r.filter(function(r){return 0!==r}),t=0;t<e.length-1;t++)e[t]===e[t+1]&&(e[t]*=2,e.splice(t+1,1),u+=e[t]);for(;e.length<4;)e.push(0);return e}var s=function(){for(var r=0;r<4;r++)for(var t=0;t<4;t++)if(0===e[r][t])return!0;return!1};function l(){for(var r=0;r<4;r++)for(var t=0;t<4;t++){var o=n.rows[r].cells[t];o.className="field-cell field-cell--".concat(e[r][t]),o.textContent=e[r][t]||""}}function d(){if(s())for(var r=!1;!r;){var t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());0===e[t][n]&&(e[t][n]=2,l(),r=!0)}}var v=function(r){return r[0].map(function(e,t){return r.map(function(r){return r[t]})})};function m(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=0;t<4;t++){var n=r[t];n=f(n),r[t]=n}}function h(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=0;t<4;t++){var n=r[t].reverse();n=f(n),r[t]=n.reverse()}}var y=function(){for(var r=0;r<e[0].length;r++)for(var t=0;t<e.length;t++)if(2048===e[r][t])return!0;return!1},g=function(r){for(var e=0;e<4;e++)for(var t=0;t<3;t++)if(r[e][t]===r[e][t+1])return!0;return!1};t.addEventListener("click",function(){t.classList.toggle("start",!1),t.classList.toggle("restart",!0),t.innerText="Restart",i.classList.add("hidden"),a.classList.add("hidden"),c.classList.add("hidden"),e=Array.from({length:4},function(){return[,,,,].fill(0)}),u=0,o.textContent=u,d(),d()}),document.addEventListener("keydown",function(t){var n;if(n=e,s()||g(v(n))||g(n)||a.classList.remove("hidden"),y())i.classList.remove("hidden"),l();else{var c,f,p=e.map(function(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()});switch(t.key){case"ArrowLeft":m();break;case"ArrowRight":h();break;case"ArrowDown":h(c=v(e)),e=v(c);break;case"ArrowUp":m(f=v(e)),e=v(f)}(function(r,e){for(var t=0;t<4;t++)for(var n=0;n<4;n++)if(r[t][n]!==e[t][n])return!0;return!1})(p,e)&&(d(),l())}o.textContent=u});
//# sourceMappingURL=index.cf0fde68.js.map
